# C++ 结构体案例总结：老师-学生数据组织 & 英雄信息排序

> 目标：通过两个典型案例掌握 **结构体定义**、**结构体数组**、**结构体嵌套**、**函数传参**、**随机赋值**、**冒泡排序** 与 **格式化输出**。



## 案例1：老师带学生（结构体嵌套 + 数组 + 随机分数）

### 需求描述
- 学校做项目：**3 名老师**，每名老师带 **5 名学生**
- 设计结构体：
  - 学生：姓名、分数
  - 老师：姓名、**学生数组（5 个学生）**
- 创建老师数组（3 个老师）
- 通过函数给老师与学生赋值（学生分数随机）
- 打印所有老师与其学生信息

### 数据结构设计（核心）
```cpp
struct student {
    string sName;
    int score;
};

struct teacher {
    string tName;
    struct student sArray[5];
};
````

#### 关键点

* `teacher` 内部包含 `student sArray[5]`：这叫 **结构体嵌套**（组合）
* `teacher tArray[3]`：这是 **结构体数组**
* 数组传参：`teacher tArray[]` 在函数形参处会退化为指针 `teacher*`

### 核心流程（思路）

1. `srand(time(NULL))` 设置随机种子（保证每次运行随机不同）
2. `allocateSpace(tArray, len)`

   * 给 `tArray[i].tName` 赋值（如 teacher_A）
   * 给 `tArray[i].sArray[j]` 的学生姓名赋值（如 student_A）
   * 用 `rand() % 61 + 40` 生成 `[40,100]` 的随机分数
3. `printInfo(tArray, len)` 打印数据

### 随机分数表达式解释

```cpp
rand() % 61 + 40;
```

* `rand() % 61` 生成 `0~60`
* `+40` 后范围变为 `40~100`
* 得到 **闭区间** `[40, 100]` 的随机整数

### 适用场景

* 一对多关系的数据组织：老师-学生、班级-学生、部门-员工等
* 需要“固定数量子对象”的结构（如一个老师固定 5 个学生）

---

## 案例2：英雄信息排序（结构体数组 + 冒泡排序）

### 需求描述

* 设计英雄结构体，包含：姓名、年龄、性别
* 创建包含 5 名英雄的结构体数组
* 用 **冒泡排序** 按年龄升序排序
* 打印排序前与排序后的结果

### 数据结构设计（核心）

```cpp
struct Hero {
    string name;
    int age;
    string sex;
};
```

### 冒泡排序（按 age 升序）

```cpp
void bubbleSort(Hero heroArray[], int len)
{
    for (int i = 0; i < len - 1; i++)
    {
        for (int j = 0; j < len - 1 - i; j++)
        {
            if (heroArray[j].age > heroArray[j + 1].age)
            {
                Hero temp = heroArray[j];
                heroArray[j] = heroArray[j + 1];
                heroArray[j + 1] = temp;
            }
        }
    }
}
```

#### 关键点

* 冒泡排序的核心：**相邻比较 + 交换**
* `len - 1 - i`：每一轮会把最大值“冒泡”到末尾，末尾元素已排好就不再比较
* 交换结构体时直接用临时变量即可（结构体支持整体赋值）

### 适用场景

* 结构体数组的排序/筛选：学生成绩排序、商品价格排序、比赛名次排序等
* 初学者理解排序算法与数据结构结合

---

## 两个案例的对比总结

| 对比点  | 案例1：老师-学生                               | 案例2：英雄排序                             |
| ---- | --------------------------------------- | ------------------------------------ |
| 数据形态 | 一对多（嵌套结构体 + 数组）                         | 一维结构体数组                              |
| 重点技能 | 结构体嵌套、数组组织、随机赋值、遍历打印                    | 冒泡排序、结构体交换、排序前后对比                    |
| 典型函数 | 赋值函数 `allocateSpace` + 打印函数 `printInfo` | 排序函数 `bubbleSort` + 打印函数 `printHero` |
| 常见用途 | 管理关系型数据（父对象含子对象数组）                      | 对对象集合进行排序                            |

---

## 必会知识点清单（背下来就稳）

* ✅ 结构体定义：`struct Xxx { ... };`
* ✅ 结构体数组：`Xxx arr[n];`
* ✅ 结构体嵌套：结构体中包含另一个结构体（或其数组）
* ✅ 数组传参退化：`T arr[]` 等价于 `T* arr`
* ✅ `sizeof(arr)/sizeof(arr[0])` 只适用于 **真实数组**（在 `main` 里）
* ✅ `rand()` 生成随机数必须配合 `srand(time(NULL))`
* ✅ 冒泡排序：双重循环 + 相邻比较交换

---

## 可扩展练习（建议你写一遍）

1. 案例1：把学生分数随机范围改成 `[0,100]`，并统计每位老师学生平均分
2. 案例1：给每个老师的学生按分数排序（老师内部排序）
3. 案例2：改成按年龄降序；或年龄相同按姓名排序
4. 案例2：增加字段（如战力 power），实现多关键字排序

---

```
```
